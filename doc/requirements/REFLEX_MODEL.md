# Open-Think-Reflex éœ€æ±‚æ–‡æ¡£

> **ç‰ˆæœ¬**: v2.0  
> **çŠ¶æ€**: è‰ç¨¿  
> **å®šä½**: v1.0 - AIè¾“å…¥åŠ é€Ÿå™¨ | v2.0 - æ€ç»ªæ•´ç†æ‰©å±•

---

## ç›®å½•

1. [æ ¸å¿ƒæ¦‚å¿µ](#1-æ ¸å¿ƒæ¦‚å¿µ)
2. [æ„¿æ™¯ä¸è·¯çº¿](#2-æ„¿æ™¯ä¸è·¯çº¿)
3. [äº¤äº’è®¾è®¡](#3-äº¤äº’è®¾è®¡)
4. [åå°„ç”Ÿå‘½å‘¨æœŸ](#4-åå°„ç”Ÿå‘½å‘¨æœŸ)
5. [åŠŸèƒ½éœ€æ±‚](#5-åŠŸèƒ½éœ€æ±‚)
6. [æ•°æ®ç»“æ„](#6-æ•°æ®ç»“æ„)
7. [å­˜å‚¨è®¾è®¡](#7-å­˜å‚¨è®¾è®¡)
8. [åŒ¹é…ç®—æ³•](#8-åŒ¹é…ç®—æ³•)
9. [AIé›†æˆ](#9-aié›†æˆ)
10. [å¯¼å‡ºä¸åŒæ­¥](#10-å¯¼å‡ºä¸åŒæ­¥)
11. [é…ç½®ç®¡ç†](#11-é…ç½®ç®¡ç†)
12. [é”™è¯¯å¤„ç†](#12-é”™è¯¯å¤„ç†)
13. [æ€§èƒ½è¦æ±‚](#13-æ€§èƒ½è¦æ±‚)
14. [å‘½ä»¤è¡Œä½¿ç”¨](#14-å‘½ä»¤è¡Œä½¿ç”¨)
15. [åå°„å·¥ä½œæµ](#15-åå°„å·¥ä½œæµæ ¸å¿ƒæµç¨‹)
16. [Shellè‡ªåŠ¨è¡¥å…¨](#16-shellè‡ªåŠ¨è¡¥å…¨)
17. [å®‰è£…ä¸éƒ¨ç½²](#17-å®‰è£…ä¸éƒ¨ç½²)
18. [æµ‹è¯•ç­–ç•¥](#18-æµ‹è¯•ç­–ç•¥)
19. [è·¯çº¿è§„åˆ’](#19-è·¯çº¿è§„åˆ’)

---

## 1. æ ¸å¿ƒæ¦‚å¿µ

### 1.1 å¤§è„‘ä¸åå°„çš„ç±»æ¯”

```
äººç±»ç¥ç»ç³»ç»Ÿ              AIäº¤äº’ç³»ç»Ÿ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å¤§è„‘ï¼ˆå¤æ‚æ€è€ƒï¼‰       AIå¤§æ¨¡å‹ï¼ˆé€šç”¨æ™ºèƒ½ï¼‰
  â†“                      â†“
è„Šé«“åå°„ï¼ˆè‡ªåŠ¨åŒ–ï¼‰       åå°„ï¼ˆé«˜é¢‘æ“ä½œå¿«é€Ÿå“åº”ï¼‰
```

**æ ¸å¿ƒè§‚ç‚¹**ï¼š
- å¤§è„‘ = å¤§æ¨¡å‹ï¼ˆæ…¢é€Ÿæ€è€ƒï¼‰
- åå°„ = å¿«æ·æŒ‡ä»¤ï¼ˆå¿«é€Ÿæ‰§è¡Œï¼‰
- åå°„å½¢æˆéœ€è¦é‡å¤å¼ºåŒ–
- åå°„è¡°å‡å› ä¸ºä¸ä½¿ç”¨

---

## 2. æ„¿æ™¯ä¸è·¯çº¿

### 2.1 v1.0 ç›®æ ‡ï¼šAIè¾“å…¥åŠ é€Ÿå™¨

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | çŠ¶æ€ | è¯´æ˜ |
|------|--------|------|------|
| åå°„å½¢æˆ | P0 | ğŸ”¶ | åŒ¹é…â†’å¼ºåŒ–â†’é˜ˆå€¼â†’æ¿€æ´» |
| æ€ç»´é“¾æ ‘ | P0 | ğŸ”¶ | å¯è§†åŒ–å±•ç¤ºåŒ¹é…åˆ†æ”¯ |
| å¿«æ·é”®è§¦å‘ | P0 | ğŸ”¶ | ç©ºæ ¼è§¦å‘ç”Ÿæˆ |
| æœ¬åœ°å­˜å‚¨ | P1 | ğŸ”¶ | SQLite |
| è¡°å‡æœºåˆ¶ | P2 | ğŸ”¶ | é•¿æœŸä¸ç”¨è‡ªåŠ¨è¡°å‡ |
| åŒ¹é…ç®—æ³• | P0 | ğŸ”¶ | è¯­ä¹‰/å…³é”®è¯/å‘é‡ |
| é…ç½®ç®¡ç† | P1 | ğŸ”¶ | AI providerã€å­˜å‚¨è·¯å¾„ |

### 2.2 v2.0 è§„åˆ’ï¼šæ€ç»ªæ•´ç†æ‰©å±•

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| é¡¹ç›®ç©ºé—´ | ä¸åŒé¡¹ç›®/é¢†åŸŸéš”ç¦»åå°„é›† |
| æ€ç»ªæ•´ç† | æ—¶é—´çº¿å›æº¯ã€èŠ‚ç‚¹è¿æ¥ |
| ç»éªŒå¯¼å‡º | å°†åå°„å¯¼å‡ºä¸ºJSON/Skill |
| äº‘åŒæ­¥ | å¤šç«¯åŒæ­¥åå°„æ•°æ® |

### 2.3 åº”ç”¨é¢†åŸŸ

åå°„ç³»ç»Ÿé€‚ç”¨äºä»»ä½•éœ€è¦**é‡å¤æ€è€ƒ**çš„é¢†åŸŸï¼š

| é¢†åŸŸ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|
| **æ€è€ƒä¸åˆ›ä½œ** | æ–‡ç« å¤§çº²ã€å†…å®¹æ¡†æ¶ã€æ–‡æ¡ˆæ¨¡æ¿ | å†™ä½œåˆ›ä½œã€å†…å®¹ç»“æ„ |
| **åˆ†æå†³ç­–** | SWOTåˆ†æã€æ ¹å› åˆ†æã€å¯¹æ¯”åˆ†æ | å•†ä¸šåˆ†æã€ç­–ç•¥åˆ¶å®š |
| **é—®é¢˜è§£å†³** | æ•…éšœæ’æŸ¥ã€è¯Šæ–­æ¡†æ¶ã€å¤ç›˜æ¨¡æ¿ | é—®é¢˜è¯Šæ–­ã€è§£å†³æ–¹æ¡ˆ |
| **å­¦ä¹ ç ”ç©¶** | æ¦‚å¿µè§£é‡Šã€æŠ€æœ¯å¯¹æ¯”ã€å­¦ä¹ è·¯å¾„ | çŸ¥è¯†è·å–ã€æŠ€èƒ½æå‡ |
| **æ–‡æ¡£ç¼–å†™** | é¡¹ç›®æ–‡æ¡£ã€æµç¨‹æ–‡æ¡£ã€å¤ç›˜æ€»ç»“ | çŸ¥è¯†æ²‰æ·€ã€ç»éªŒä¼ æ‰¿ |

### 2.4 v1.0 éªŒæ”¶æ ‡å‡†

```
âœ“ é‡Œç¨‹ç¢‘1ï¼šæ ¸å¿ƒäº¤äº’
  â”œâ”€â”€ è¾“å…¥å…³é”®è¯èƒ½è§¦å‘åå°„åŒ¹é…
  â”œâ”€â”€ æ€ç»´é“¾æ ‘æ­£ç¡®å±•ç¤ºåŒ¹é…åˆ†æ”¯
  â””â”€â”€ ç©ºæ ¼é”®èƒ½è§¦å‘ç”Ÿæˆ

âœ“ é‡Œç¨‹ç¢‘2ï¼šåå°„å½¢æˆ
  â”œâ”€â”€ é‡å¤ä½¿ç”¨èƒ½å¢å¼ºåå°„å¼ºåº¦
  â”œâ”€â”€ å¼ºåº¦è¾¾åˆ°é˜ˆå€¼è‡ªåŠ¨æ¿€æ´»
  â””â”€â”€ æ–°åå°„èƒ½æ­£ç¡®åˆ›å»º

âœ“ é‡Œç¨‹ç¢‘3ï¼šæŒä¹…åŒ–
  â”œâ”€â”€ åå°„æ•°æ®ä¿å­˜åˆ°SQLite
  â”œâ”€â”€ é‡å¯åæ•°æ®ä¸ä¸¢å¤±
  â””â”€â”€ èƒ½å¯¼å‡º/å¯¼å…¥JSON

âœ“ é‡Œç¨‹ç¢‘4ï¼šè¡°å‡ï¼ˆå¯é€‰ï¼‰
  â”œâ”€â”€ é•¿æœŸæœªç”¨åå°„è‡ªåŠ¨è¡°å‡
  â””â”€â”€ è¡°å‡å‚æ•°å¯é…ç½®
```

---

## 3. äº¤äº’è®¾è®¡

### 3.1 ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                      â”‚
â”‚  ä¸Šå±‚ï¼šæ€ç»´é“¾æ ‘å±•ç¤ºå±‚ï¼ˆä»å·¦åˆ°å³å±•å¼€ï¼‰                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  ç”¨æˆ·API â”‚ â”€â”€â”€â–º â”‚ åˆ†é¡µ    â”‚ â”€â”€â”€â–º â”‚ pageSizeâ”‚            â”‚
â”‚  â”‚  85%    â”‚      â”‚ 85%     â”‚      â”‚ pageNum â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                      â”‚
â”‚  è§†è§‰åé¦ˆï¼š                                                      â”‚
â”‚  â”œâ”€â”€ å·²é€‰åˆ†æ”¯ï¼šé«˜äº®æ˜¾ç¤ºï¼ˆç»¿è‰²ï¼‰                                   â”‚
â”‚  â”œâ”€â”€ æœªé€‰åˆ†æ”¯ï¼šç°è‰²/æ·¡åŒ–                                          â”‚
â”‚  â””â”€â”€ é€‰ä¸­æ€ï¼šè¾¹æ¡†é—ªçƒ                                              â”‚
â”‚                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ä¸­å±‚ï¼šå½“å‰è¾“å‡ºç»“æœå±‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚              AIè¾“å‡ºçš„ç»“æœå†…å®¹...                              â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ä¸‹å±‚ï¼šç”¨æˆ·è¾“å…¥å±‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ > ç”¨æˆ·è¾“å…¥å‘½ä»¤æˆ–é—®é¢˜...                            [Enter] â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                      â”‚
â”‚  æ“ä½œæç¤ºï¼š[â†‘â†“]é€‰æ‹©åˆ†æ”¯ [â†’/Enter]ç¡®è®¤å±•å¼€ [â†/Esc]è¿”å› [ç©ºæ ¼]è§¦å‘ç”Ÿæˆ [h]å¸®åŠ© [q]é€€å‡º     â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 äº¤äº’æµç¨‹

```
ç”¨æˆ·è¾“å…¥ï¼ˆä¸‹å±‚ï¼‰
    â”‚
    â–¼
åŒ¹é…åå°„
    â”‚
    â”œâ”€â”€ æœ‰åŒ¹é… â”€â”€â–º å±•ç¤ºæ€ç»´é“¾æ ‘ï¼ˆä¸Šå±‚ï¼‰
    â””â”€â”€ æ— åŒ¹é… â”€â”€â–º æç¤º"æ— åŒ¹é…ï¼ŒæŒ‰[ç©ºæ ¼]AIç”Ÿæˆ"

é€‰æ‹©ä¸ç”Ÿæˆ
    â”‚
    â”œâ”€â”€ é€‰ä¸­åˆ†æ”¯ â”€â”€â–º æŒ‰[ç©ºæ ¼]AIç”Ÿæˆè¯¥åˆ†æ”¯å†…å®¹
    â””â”€â”€ æ— åˆ†æ”¯å¯é€‰ â”€â”€â–º æŒ‰[ç©ºæ ¼]AIç”Ÿæˆæ–°å†…å®¹

ç¡®è®¤æ»šåŠ¨
    â”‚
    â””â”€â”€ æŒ‰[â†’/Enter]ç¡®è®¤å½“å‰æ–¹å‘ï¼Œå±•å¼€ä¸‹ä¸€çº§

è¾“å‡ºæ‰§è¡Œ
    â”‚
    â””â”€â”€ è¾“å‡ºåˆ°AIæˆ–æ‰§è¡Œç»“æœ
```

### 3.3 å¿«æ·é”®

| æŒ‰é”® | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| â†‘/â†“ | é€‰æ‹©åˆ†æ”¯ | ä¸Šå±‚-é€‰æ‹©æ–¹å‘ |
| â†’ / Enter | ç¡®è®¤å±•å¼€ | å±•å¼€é€‰ä¸­åˆ†æ”¯ |
| â† / Esc | è¿”å›/å–æ¶ˆ | å›é€€æˆ–å–æ¶ˆ |
| Space | è§¦å‘ç”Ÿæˆ | æ— åŒ¹é…æˆ–é€‰ä¸­åæ‰§è¡Œ |
| h | å¸®åŠ© | å…¨å±€ |
| q / Ctrl+C | é€€å‡º | å…¨å±€ |

### 3.4 è§†è§‰åé¦ˆ

| çŠ¶æ€ | è§†è§‰è¡¨ç° |
|------|----------|
| æ´»è·ƒåˆ†æ”¯ | é«˜äº®æ˜¾ç¤º |
| é€‰æ‹©ä¸­ | è¾¹æ¡†é—ªçƒ |
| å·²ç¡®è®¤ | ç»¿è‰²âœ“ |
| è¡°å‡ä¸­ | é»„è‰²âš  |
| ä¸§å¤± | ç°è‰²âœ— |

---

## 4. åå°„ç”Ÿå‘½å‘¨æœŸ

### 4.1 ä¸ƒé˜¶æ®µæ¨¡å‹

```
å»ºç«‹å°è±¡ â”€â”€â–º å¼ºåŒ– â”€â”€â–º è¾¾æˆé˜ˆå€¼ â”€â”€â–º åˆæ­¥åå°„ â”€â”€â–º åŠ å¼º
                â”‚                                    â”‚
                â–¼                                    â–¼
         ã€åå°„å½¢æˆåŒºã€‘                          æ·±åº¦åå°„ï¼ˆæ°¸ä¹…ï¼‰
                â”‚                                    â”‚
                â–¼                                    â–¼
         ä¸ç”¨ â†’ é™çº§ â†’ ä¸§å¤±                      æŒç»­å¼ºåŒ–
```

### 4.2 å„é˜¶æ®µç‰¹å¾

| é˜¶æ®µ | å¼ºåº¦ | æ„ŸçŸ¥ | å¯é€†æ€§ |
|------|------|------|--------|
| å»ºç«‹å°è±¡ | 10% | å¼º | æ˜“ |
| å¼ºåŒ– | 30% | ä¸­ | å¯é€† |
| è¾¾æˆé˜ˆå€¼ | 50% | å¼± | å°šå¯ |
| åˆæ­¥åå°„ | 70% | æ—  | å¯é€† |
| åŠ å¼º | 85% | æ—  | éš¾ |
| æ·±åº¦åå°„ | 100% | æ—  | æéš¾ |
| è¡°å‡ | â†“ | å¼± | å¯é€† |

### 4.3 è¡°å‡å…¬å¼

```
Strength(t) = Strength_initial Ã— e^(-Î» Ã— t)

å…¶ä¸­ï¼š
- Î» = è¡°å‡å¸¸æ•°ï¼ˆå› åå°„ç±»å‹è€Œå¼‚ï¼‰
- t = è·ç¦»ä¸Šæ¬¡å¼ºåŒ–çš„æ—¶é—´
```

### 4.4 è¡°å‡è§„åˆ™

| åå°„ç±»å‹ | è¡°å‡å¸¸æ•°(Î») | é»˜è®¤å‘¨æœŸ | å¯è°ƒå‚æ•° |
|----------|-------------|----------|----------|
| çŸ­æœŸåå°„ | 0.1/å¤© | 7å¤©è¡°å‡50% | å¯è°ƒ |
| ä¸­æœŸåå°„ | 0.01/å¤© | 70å¤©è¡°å‡50% | å¯è°ƒ |
| é•¿æœŸåå°„ | 0.001/å¤© | 700å¤©è¡°å‡50% | å¯è°ƒ |
| æ°¸ä¹…åå°„ | 0 | ä¸è¡°å‡ | ä¸é€‚ç”¨ |

### 4.5 è¡°å‡æ›²çº¿

```
å¼ºåº¦
100% â”‚ æ·±åº¦åå°„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                             â”‚
 85% â”‚ åŠ å¼º â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
     â”‚              â”‚ è¡°å‡æ›²çº¿    â”‚
 70% â”‚ åˆæ­¥åå°„ â”€â”€â”¤              â”‚ æ›²çº¿
     â”‚              â”‚              â”‚
 50% â”‚ é˜ˆå€¼ â”€â”€â”€â”€â”€â”€â”¤              â”‚
     â”‚              â”‚              â”‚
 30% â”‚ å¼ºåŒ– â”€â”€â”€â”€â”€â”€â”¤              â”‚
     â”‚              â”‚              â”‚
 10% â”‚ å»ºç«‹ â”€â”€â”€â”€â”€â”€â”˜              â”‚
     â”‚                             â”‚
  0% â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ—¶é—´
         0     7å¤©   14å¤©   30å¤©
```

---

## 5. åŠŸèƒ½éœ€æ±‚

### 5.1 æ ¸å¿ƒåŠŸèƒ½ï¼ˆv1.0ï¼‰

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|------|------|--------|
| ä¸‰å±‚ç•Œé¢æ˜¾ç¤º | ä¸Šä¸­ä¸‹ä¸‰å±‚å¸ƒå±€ | P0 |
| æ€ç»´é“¾æ ‘å±•å¼€ | ä»å·¦åˆ°å³å±•ç¤ºåå°„è·¯å¾„ | P0 |
| æ–¹å‘é€‰æ‹© | ä¸Šä¸‹é”®é€‰æ‹©åˆ†æ”¯ | P0 |
| ç¡®è®¤å±•å¼€ | å³é”®/å›è½¦ç¡®è®¤é€‰æ‹©æ–¹å‘ | P0 |
| AIè§¦å‘ç”Ÿæˆ | æ— åŒ¹é…æ—¶æŒ‰ç©ºæ ¼ç”Ÿæˆ | P0 |
| åå°„åŒ¹é… | è¯­ä¹‰/å…³é”®è¯åŒ¹é…ç”¨æˆ·è¾“å…¥ | P0 |
| åå°„åˆ›å»º | ä»å¯¹è¯ä¸­æå–æ–°æ¨¡å¼ | P0 |
| åå°„å¼ºåŒ– | å¤šæ¬¡ä½¿ç”¨å¢å¼ºå¼ºåº¦ | P1 |
| åå°„å­˜å‚¨ | æœ¬åœ°SQLiteæŒä¹…åŒ– | P1 |
| è¡°å‡è®¡ç®— | å®šæœŸè®¡ç®—å¹¶æ›´æ–°å¼ºåº¦ | P2 |

### 5.2 æ‰©å±•åŠŸèƒ½ï¼ˆv2.0ï¼‰

| åŠŸèƒ½ | æè¿° | è¯´æ˜ |
|------|------|------|
| é¡¹ç›®ç©ºé—´ | éš”ç¦»ä¸åŒé¡¹ç›®åå°„é›† | ç›®å½•/æ ‡ç­¾éš”ç¦» |
| æ—¶é—´çº¿å›æº¯ | æŒ‰æ—¶é—´æŸ¥çœ‹å†å²åå°„ | æ’åºã€ç­›é€‰ |
| èŠ‚ç‚¹è¿æ¥ | åå°„ä¹‹é—´çš„å…³è”å…³ç³» | å›¾ç»“æ„ |
| ç»éªŒå¯¼å‡º | å¯¼å‡ºä¸ºAgentSkill | AIæ¶¦è‰² |
| äº‘åŒæ­¥ | å¤šè®¾å¤‡æ•°æ®åŒæ­¥ | Redis/PostgreSQL |
| å¤šäººåä½œ | é¡¹ç›®äº¤æ¥ã€å…±äº«åå°„ | æƒé™æ§åˆ¶ |

---

## 6. æ•°æ®ç»“æ„

### 6.1 åå°„ç»“æ„

```typescript
interface Pattern {
  id: string;                    // å”¯ä¸€æ ‡è¯†
  trigger: string;               // è§¦å‘è¯
  response: string;             // å“åº”å†…å®¹
  strength: number;             // å¼ºåº¦ 0-100
  threshold: number;           // æ¿€æ´»é˜ˆå€¼ï¼Œé»˜è®¤50
  decayRate: number;           // è¡°å‡ç‡
  decayEnabled: boolean;        // æ˜¯å¦å¯ç”¨è¡°å‡
  connections: string[];        // å…³è”åå°„IDåˆ—è¡¨
  metadata: {
    created: number;           // åˆ›å»ºæ—¶é—´æˆ³
    updated: number;           // æ›´æ–°æ—¶é—´æˆ³
    reinforcementCount: number; // å¼ºåŒ–æ¬¡æ•°
    decayCount: number;        // è¡°å‡æ¬¡æ•°
    tags: string[];            // æ ‡ç­¾ï¼ˆç”¨äºé¡¹ç›®ç©ºé—´ï¼‰
    project?: string;          // é¡¹ç›®IDï¼ˆv2.0ï¼‰
    userId?: string;           // ç”¨æˆ·IDï¼ˆv2.0ï¼‰
  };
}
```

### 6.2 æ€ç»´é“¾æ ‘

```typescript
interface ThoughtChain {
  root: string;                 // ç”¨æˆ·è¾“å…¥ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰
  branches: ChainBranch[];       // åˆ†æ”¯åˆ—è¡¨
  currentDepth: number;         // å½“å‰æ·±åº¦
  maxDepth: number;             // æœ€å¤§æ·±åº¦
  createdAt: number;           // åˆ›å»ºæ—¶é—´
}

interface ChainBranch {
  id: string;
  pattern: Pattern;            // å…³è”åå°„
  next: ChainBranch[];        // å­åˆ†æ”¯
  selected: boolean;          // æ˜¯å¦è¢«é€‰æ‹©
  confirmed: boolean;         // æ˜¯å¦å·²ç¡®è®¤å±•å¼€
}
```

### 6.3 é¡¹ç›®ç©ºé—´ï¼ˆv2.0ï¼‰

```typescript
interface ProjectSpace {
  id: string;
  name: string;                // é¡¹ç›®åç§°
  description: string;         // é¡¹ç›®æè¿°
  patterns: string[];          // åå°„IDåˆ—è¡¨
  createdAt: number;
  updatedAt: number;
  owner: string;              // æ‰€æœ‰è€…
  collaborators: string[];     // åä½œè€…
  visibility: 'private' | 'team' | 'public';
}
```

---

## 7. å­˜å‚¨è®¾è®¡

### 7.1 SQLiteå­˜å‚¨ï¼ˆv1.0ï¼‰

SQLiteæ˜¯å½“å‰æ¨èçš„å­˜å‚¨æ–¹å¼ï¼Œå•æ–‡ä»¶ã€æ˜“å¤‡ä»½ã€‚

```sql
-- åå°„è¡¨
CREATE TABLE patterns (
  id TEXT PRIMARY KEY,
  trigger TEXT NOT NULL,
  response TEXT NOT NULL,
  strength REAL NOT NULL DEFAULT 0,
  threshold REAL NOT NULL DEFAULT 50,
  decay_rate REAL NOT NULL DEFAULT 0.01,
  decay_enabled INTEGER NOT NULL DEFAULT 1,
  connections TEXT,             -- JSONæ•°ç»„
  created_at INTEGER NOT NULL,
  updated_at INTEGER NOT NULL,
  reinforcement_count INTEGER NOT NULL DEFAULT 0,
  decay_count INTEGER NOT NULL DEFAULT 0,
  tags TEXT,                    -- JSONæ•°ç»„
  project TEXT,
  user_id TEXT
);

-- æ€ç»´é“¾è¡¨
CREATE TABLE thought_chains (
  id TEXT PRIMARY KEY,
  root TEXT NOT NULL,
  branches TEXT NOT NULL,       -- JSON
  current_depth INTEGER NOT NULL,
  max_depth INTEGER NOT NULL,
  created_at INTEGER NOT NULL
);

-- é¡¹ç›®ç©ºé—´è¡¨ï¼ˆv2.0ï¼‰
CREATE TABLE project_spaces (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  owner TEXT NOT NULL,
  collaborators TEXT,           -- JSONæ•°ç»„
  visibility TEXT DEFAULT 'private',
  created_at INTEGER NOT NULL,
  updated_at INTEGER NOT NULL
);

-- ç´¢å¼•
CREATE INDEX idx_patterns_trigger ON patterns(trigger);
CREATE INDEX idx_patterns_strength ON patterns(strength);
CREATE INDEX idx_patterns_project ON patterns(project);
CREATE INDEX idx_patterns_tags ON patterns(tags);
CREATE INDEX idx_chains_created ON thought_chains(created_at);
```

### 7.2 å­˜å‚¨è¿ç§»è·¯å¾„

| ç‰ˆæœ¬ | å­˜å‚¨æ–¹å¼ | è¯´æ˜ |
|------|----------|------|
| v1.0 | SQLite | å½“å‰æ¨èï¼Œå•æ–‡ä»¶ã€æ˜“å¤‡ä»½ |
| v1.5 | + Redisç¼“å­˜ | å¯é€‰ï¼ŒåŠ é€Ÿçƒ­ç‚¹æŸ¥è¯¢ |
| v2.0 | PostgreSQL | å¯é€‰ï¼Œå¤šäººåä½œã€äº‘åŒæ­¥ |

### 7.3 æ•°æ®ç›®å½•ç»“æ„

```
~/.otr/
â”œâ”€â”€ config.yaml              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ reflex.db               # SQLiteæ•°æ®åº“
â”œâ”€â”€ exports/                # å¯¼å‡ºç›®å½•
â”‚   â”œâ”€â”€ patterns.json
â”‚   â””â”€â”€ skills/
â””â”€â”€ logs/                   # æ—¥å¿—ç›®å½•
    â””â”€â”€ reflex.log
```

### 7.4 å¤‡ä»½ä¸æ¢å¤

#### å¤‡ä»½å‘½ä»¤

```bash
# å®Œæ•´å¤‡ä»½ï¼ˆæ•°æ®åº“+é…ç½®ï¼‰
otr backup --output reflex-backup-$(date +%Y%m%d).tar.gz

# ä»…å¤‡ä»½æ•°æ®åº“
otr backup --db-only --output reflex-db-$(date +%Y%m%d).db

# ä»…å¤‡ä»½åå°„æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰
otr backup --json-only --output reflex-patterns-$(date +%Y%m%d).json

# å¤‡ä»½æŒ‡å®šé¡¹ç›®
otr backup --project my-project --output project-backup.tar.gz

# è‡ªåŠ¨å¤‡ä»½ï¼ˆæ¯æ—¥å‡Œæ™¨2ç‚¹ï¼‰
otr backup --schedule daily --time 02:00

# ä¿ç•™æœ€è¿‘10ä¸ªå¤‡ä»½
otr backup --retain 10
```

#### æ¢å¤å‘½ä»¤

```bash
# ä»å®Œæ•´å¤‡ä»½æ¢å¤
otr restore reflex-backup-20240220.tar.gz

# ä»æ•°æ®åº“å¤‡ä»½æ¢å¤
otr restore --db-only reflex-db-20240220.db

# ä»JSONæ¢å¤ï¼ˆåˆå¹¶åˆ°ç°æœ‰æ•°æ®ï¼‰
otr restore --merge reflex-patterns-20240220.json

# ä»JSONæ¢å¤ï¼ˆæ›¿æ¢ç°æœ‰æ•°æ®ï¼‰
otr restore --replace reflex-patterns-20240220.json

# æ¢å¤å‰é¢„è§ˆï¼ˆä¸æ‰§è¡Œï¼‰
otr restore --dry-run reflex-backup-20240220.tar.gz
```

#### å¤‡ä»½é…ç½®

```yaml
backup:
  enabled: true
  schedule: "daily"           # daily | weekly | none
  time: "02:00"               # å¤‡ä»½æ—¶é—´ï¼ˆæ¯æ—¥ï¼‰
  retain: 7                   # ä¿ç•™æ•°é‡
  include:
    - db                     # æ•°æ®åº“
    - config                 # é…ç½®
    - exports                # å¯¼å‡ºç›®å½•
  exclude:
    - "*.log"               # æ’é™¤æ—¥å¿—
  storage: "local"            # local | cloud
  cloud:
    provider: "s3"           # s3 | gcs | azure
    bucket: "reflex-backups"
    path: "backups/"
    credentials:
      accessKey: "${CLOUD_ACCESS_KEY}"
      secretKey: "${CLOUD_SECRET_KEY}"
```

### 7.5 ç‰ˆæœ¬è¿ç§»

å½“æ•°æ®ç»“æ„å˜æ›´æ—¶ï¼Œéœ€è¦æ‰§è¡Œç‰ˆæœ¬è¿ç§»ã€‚

```bash
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
otr version

# æ£€æŸ¥æ–°ç‰ˆæœ¬
otr version --check

# æ‰§è¡Œè¿ç§»
otr migrate

# å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
otr migrate --rollback

# æŸ¥çœ‹è¿ç§»æ—¥å¿—
otr migrate --log
```

#### è¿ç§»ç­–ç•¥

| åœºæ™¯ | å¤„ç†æ–¹å¼ |
|------|----------|
| æ•°æ®åº“ç»“æ„å˜æ›´ | è‡ªåŠ¨åˆ›å»ºè¿ç§»è„šæœ¬ã€æ‰§è¡ŒALTER TABLE |
| å­—æ®µé‡å‘½å | åˆ›å»ºæ–°å­—æ®µã€è¿ç§»æ•°æ®ã€åˆ é™¤æ—§å­—æ®µ |
| æ•°æ®æ ¼å¼å‡çº§ | å¯¼å‡ºâ†’è½¬æ¢â†’å¯¼å…¥ |
| è·¨ç‰ˆæœ¬è·³è·ƒ | æŒ‰é¡ºåºæ‰§è¡Œæ¯ä¸ªç‰ˆæœ¬çš„è¿ç§» |

#### è¿ç§»æµç¨‹

```
1. æ£€æµ‹å½“å‰ç‰ˆæœ¬
2. ä¸‹è½½å¯¹åº”è¿ç§»è„šæœ¬
3. åˆ›å»ºæ•°æ®åº“å¿«ç…§ï¼ˆè‡ªåŠ¨ï¼‰
4. æ‰§è¡Œè¿ç§»
5. éªŒè¯æ•°æ®å®Œæ•´æ€§
6. æ›´æ–°ç‰ˆæœ¬å·

å¦‚æœè¿ç§»å¤±è´¥ï¼š
1. è‡ªåŠ¨å›æ»šåˆ°å¿«ç…§
2. è®°å½•é”™è¯¯æ—¥å¿—
3. æç¤ºç”¨æˆ·æ‰‹åŠ¨å¤„ç†
```

#### ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | å˜æ›´è¯´æ˜ |
|------|----------|
| v1.0.0 | åˆå§‹ç‰ˆæœ¬ |
| v1.1.0 | æ–°å¢tagså­—æ®µã€æ–°å¢projectå­—æ®µ |
| v1.2.0 | æ–°å¢connections JSONå­—æ®µã€ä¼˜åŒ–ç´¢å¼• |
| v2.0.0 | æ–°å¢é¡¹ç›®ç©ºé—´è¡¨ã€æ–°å¢æ€ç»´é“¾è¡¨ |

---

## 8. åŒ¹é…ç®—æ³•

### 8.1 åŒ¹é…ç­–ç•¥

| ç­–ç•¥ | ä¼˜å…ˆçº§ | é€‚ç”¨åœºæ™¯ | æ€§èƒ½ |
|------|--------|----------|------|
| exact | P0 | ç²¾ç¡®åŒ¹é…å…³é”®è¯ | å¿« |
| keyword | P0 | å…³é”®è¯æå–åŒ¹é… | å¿« |
| semantic | P1 | è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é… | ä¸­ |
| fuzzy | P2 | æ¨¡ç³ŠåŒ¹é… | æ…¢ |

### 8.2 åŒ¹é…æµç¨‹

```
ç”¨æˆ·è¾“å…¥
    â”‚
    â–¼
1. exactåŒ¹é…ï¼ˆå…³é”®è¯å®Œå…¨åŒ¹é…ï¼‰
    â”‚
    â”œâ”€â”€ å‘½ä¸­ â”€â”€â–º è¿”å›ç»“æœ
    â””â”€â”€ æœªå‘½ä¸­ â”€â”€â–º ä¸‹ä¸€æ­¥
        â”‚
        â–¼
2. keywordåŒ¹é…ï¼ˆå…³é”®è¯æå–ï¼‰
    â”‚
    â”œâ”€â”€ å‘½ä¸­ â”€â”€â–º è¿”å›ç»“æœ
    â””â”€â”€ æœªå‘½ä¸­ â”€â”€â–º ä¸‹ä¸€æ­¥
        â”‚
        â–¼
3. semanticåŒ¹é…ï¼ˆè¯­ä¹‰ç›¸ä¼¼åº¦ï¼‰
    â”‚
    â”œâ”€â”€ ç›¸ä¼¼åº¦ â‰¥ 80% â”€â”€â–º è¿”å›ç»“æœ
    â””â”€â”€ ç›¸ä¼¼åº¦ < 80% â”€â”€â–º æ— åŒ¹é…
```

### 8.3 åŒ¹é…é…ç½®

```yaml
matching:
  strategies:
    - name: exact
      enabled: true
      weight: 1.0
    - name: keyword
      enabled: true
      weight: 0.8
    - name: semantic
      enabled: true
      weight: 0.6
      model: "embedding-model"  # å¯é€‰
    - name: fuzzy
      enabled: false
      weight: 0.4
  threshold:
    exact: 100
    keyword: 80
    semantic: 70
    fuzzy: 60
  maxResults: 10
```

### 8.4 è¯­ä¹‰åŒ¹é…ï¼ˆå¯é€‰ï¼‰

```typescript
interface SemanticMatcher {
  // åŠ è½½embeddingæ¨¡å‹
  loadModel(model: string): Promise<void>;
  
  // ç”Ÿæˆembedding
  embed(text: string): Promise<number[]>;
  
  // è®¡ç®—ç›¸ä¼¼åº¦
  cosineSimilarity(a: number[], b: number[]): number;
  
  // æ‰¹é‡åŒ¹é…
  match(input: string, patterns: Pattern[], threshold: number): MatchResult[];
}
```

---

## 9. AIé›†æˆ

### 9.1 AIæä¾›å•†æŠ½è±¡å±‚

ä¸ç»‘å®šç‰¹å®šAIæä¾›å•†ï¼Œæ”¯æŒå¤šç§AIæœåŠ¡ã€‚

```typescript
interface AIProvider {
  name: string;
  version: string;
  
  // æ–‡æœ¬ç”Ÿæˆ
  complete(prompt: string, options?: AIOptions): Promise<string>;
  
  // æµå¼ç”Ÿæˆ
  stream(prompt: string, options?: AIOptions): AsyncIterator<string>;
  
  // Embeddingç”Ÿæˆ
  embed(text: string): Promise<number[]>;
  
  // å¥åº·æ£€æŸ¥
  healthCheck(): Promise<boolean>;
}

interface AIOptions {
  model?: string;
  maxTokens?: number;
  temperature?: number;
  systemPrompt?: string;
}
```

### 9.2 æ”¯æŒçš„æä¾›å•†

| æä¾›å•† | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| Claude | âœ… å½“å‰æ¨è | Anthropic API |
| OpenAI | â³ åç»­ | GPT-4 API |
| æœ¬åœ°æ¨¡å‹ | â³ åç»­ | Ollama/LM Studio |
| OpenRouter | â³ åç»­ | èšåˆå¤šä¸ªæ¨¡å‹ |

### 9.3 Provideré…ç½®

```yaml
providers:
  default: "claude"
  
  claude:
    apiKey: "${ANTHROPIC_API_KEY}"
    baseUrl: "https://api.anthropic.com"
    model: "claude-sonnet-4-20250514"
    maxTokens: 4096
    temperature: 0.7
  
  openai:
    apiKey: "${OPENAI_API_KEY}"
    baseUrl: "https://api.openai.com/v1"
    model: "gpt-4"
    maxTokens: 4096
    temperature: 0.7
  
  local:
    baseUrl: "http://localhost:11434/v1"
    model: "llama3"
    maxTokens: 4096
    temperature: 0.7
```

---

## 10. å¯¼å‡ºä¸åŒæ­¥

### 10.1 å¯¼å‡ºåŠŸèƒ½

```bash
# å¯¼å‡ºä¸ºJSON
otr export json --output patterns.json

# å¯¼å‡ºä¸ºSQLite
otr export sqlite --output patterns.db

# å¯¼å‡ºæŒ‡å®šé¡¹ç›®
otr export json --project my-project --output project-reflex.json

# å¯¼å‡ºå…¨éƒ¨
otr export json --all --output all-reflex.json
```

### 10.2 å¯¼å…¥åŠŸèƒ½

```bash
# å¯¼å…¥JSONæ–‡ä»¶
otr import json reflex-file.json

# å¯¼å…¥å¹¶æŒ‡å®šåˆ°é¡¹ç›®
otr import json reflex-file.json --project my-project

# é¢„è§ˆå¯¼å…¥
otr import json reflex-file.json --preview

# åˆå¹¶å¯¼å…¥ï¼ˆè·³è¿‡å·²å­˜åœ¨ï¼‰
otr import json reflex-file.json --merge

# æ›¿æ¢å¯¼å…¥ï¼ˆè¦†ç›–å·²å­˜åœ¨ï¼‰
otr import json reflex-file.json --replace
```

### 10.3 JSONæ ¼å¼

```json
{
  "version": "1.0",
  "exportedAt": 1700000000,
  "source": "personal",
  "patterns": [
    {
      "trigger": "market-analysis",
      "response": "# Market Trend Analysis Framework\n...",
      "tags": ["analysis", "business"],
      "strength": 85,
      "createdAt": 1700000000,
      "lastUsedAt": 1700000000
    }
  ]
}
```

### 10.4 v2.0 åŒæ­¥è§„åˆ’

| åŠŸèƒ½ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| æ–‡ä»¶å¯¼å‡º/å¯¼å…¥ | JSONå¯¼å‡ºå¯¼å…¥ | âœ… v1.0 |
| é¡¹ç›®å¯¼å‡º | é¡¹ç›®çº§åˆ«å¯¼å‡º | âœ… v1.0 |
| äº‘åŒæ­¥ | å¤šè®¾å¤‡æ•°æ®åŒæ­¥ | â³ v2.0 |
| P2PåŒæ­¥ | å±€åŸŸç½‘åŒæ­¥ | â³ v2.0 |

### 10.5 v2.0 é¡¹ç›®ç©ºé—´

```bash
# åˆ›å»ºé¡¹ç›®
otr project create my-project --name "é¡¹ç›®å"

# åˆ—å‡ºé¡¹ç›®
otr project list

# åˆ‡æ¢é¡¹ç›®
otr project use my-project

# å¯¼å‡ºé¡¹ç›®
otr project export my-project --output project.json

# å¯¼å…¥é¡¹ç›®
otr project import project.json

## 11. é…ç½®ç®¡ç†

### 11.1 é…ç½®æ–‡ä»¶ç»“æ„

```yaml
# ~/.otr/config.yaml

# åº”ç”¨é…ç½®
app:
  name: "open-think-reflex"
  version: "1.0.0"
  dataDir: "~/.otr"
  logLevel: "info"

# å­˜å‚¨é…ç½®
storage:
  type: "sqlite"              # sqlite | redis | postgresql
  sqlite:
    path: "~/.otr/reflex.db"
  redis:
    host: "localhost"
    port: 6379
    keyPrefix: "reflex:"
  postgresql:
    host: "localhost"
    port: 5432
    database: "reflex"
    tablePrefix: "reflex_"

# AIé…ç½®
ai:
  provider: "claude"           # é»˜è®¤provider
  providers:
    claude:
      apiKey: "${ANTHROPIC_API_KEY}"
      baseUrl: "https://api.anthropic.com"
      model: "claude-sonnet-4-20250514"
      maxTokens: 4096
      temperature: 0.7

# åŒ¹é…é…ç½®
matching:
  strategies:
    exact:
      enabled: true
      weight: 1.0
    keyword:
      enabled: true
      weight: 0.8
    semantic:
      enabled: false
      weight: 0.6
      model: "embedding-model"
    fuzzy:
      enabled: false
      weight: 0.4
  threshold:
    exact: 100
    keyword: 80
    semantic: 70
    fuzzy: 60
  maxResults: 10

# è¡°å‡é…ç½®
decay:
  enabled: true
  interval: "1h"               # è¡°å‡è®¡ç®—é—´éš”
  types:
    short:
      lambda: 0.1              # 7å¤©è¡°å‡50%
      default: true
    medium:
      lambda: 0.01            # 70å¤©è¡°å‡50%
    long:
      lambda: 0.001           # 700å¤©è¡°å‡50%
    permanent:
      lambda: 0                # ä¸è¡°å‡

# é¡¹ç›®é…ç½®ï¼ˆv2.0ï¼‰
project:
  defaultProject: null
  storageType: "directory"    # directory | database

# å¯¼å‡ºé…ç½®ï¼ˆv2.0ï¼‰
export:
  skill:
    outputDir: "~/reflex-skills"
    autoPublish: false
    aiPolish: true
```

### 11.2 ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ | å¿…å¡« |
|------|------|------|
| ANTHROPIC_API_KEY | Anthropic APIå¯†é’¥ | å½“ä½¿ç”¨Claudeæ—¶ |
| OPENAI_API_KEY | OpenAI APIå¯†é’¥ | å½“ä½¿ç”¨OpenAIæ—¶ |
| REFLEX_DATA_DIR | æ•°æ®ç›®å½• | å¦ï¼Œé»˜è®¤~/.otr |
| REFLEX_LOG_LEVEL | æ—¥å¿—çº§åˆ« | å¦ï¼Œé»˜è®¤info |

### 11.3 é…ç½®å‘½ä»¤

```bash
# æŸ¥çœ‹å½“å‰é…ç½®
otr config show

# æŸ¥çœ‹ç‰¹å®šé…ç½®é¡¹
otr config get ai.provider

# è®¾ç½®é…ç½®é¡¹
otr config set matching.threshold.semantic 75

# é‡ç½®é…ç½®
otr config reset

# å¯¼å…¥é…ç½®
otr config import config.yaml

# å¯¼å‡ºé…ç½®
otr config export config.yaml
```

---

## 12. é”™è¯¯å¤„ç†

### 12.1 é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| P-001 | Pattern | åå°„ä¸å­˜åœ¨ |
| P-002 | Pattern | åå°„åˆ›å»ºå¤±è´¥ |
| P-003 | Pattern | åå°„æ›´æ–°å¤±è´¥ |
| P-004 | Pattern | åå°„åˆ é™¤å¤±è´¥ |
| P-005 | Pattern | åå°„IDé‡å¤ |
| M-001 | Matching | åŒ¹é…è¶…æ—¶ |
| M-002 | Matching | åŒ¹é…å¤±è´¥ |
| S-001 | Storage | å­˜å‚¨ç©ºé—´ä¸è¶³ |
| S-002 | Storage | æ•°æ®åº“è¿æ¥å¤±è´¥ |
| S-003 | Storage | æ•°æ®è¯»å–å¤±è´¥ |
| A-001 | AI | APIè°ƒç”¨å¤±è´¥ |
| A-002 | AI | APIé…é¢ä¸è¶³ |
| A-003 | AI | æ¨¡å‹ä¸æ”¯æŒ |
| C-001 | Config | é…ç½®æ–‡ä»¶é”™è¯¯ |
| C-002 | Config | é…ç½®é¡¹ä¸å­˜åœ¨ |
| E-001 | Export | å¯¼å‡ºæ ¼å¼ä¸æ”¯æŒ |
| E-002 | Export | Skillæ¶¦è‰²å¤±è´¥ |

### 12.2 é”™è¯¯å¤„ç†ç­–ç•¥

| åœºæ™¯ | å¤„ç†æ–¹å¼ |
|------|----------|
| åå°„åŒ¹é…è¶…æ—¶ | é™çº§åˆ°å…³é”®è¯åŒ¹é… â†’ ä»å¤±è´¥åˆ™æç¤º |
| AI APIè°ƒç”¨å¤±è´¥ | é‡è¯•3æ¬¡ â†’ ä»å¤±è´¥åˆ™ä½¿ç”¨ç¼“å­˜æˆ–æç¤º |
| æ•°æ®åº“è¿æ¥å¤±è´¥ | ä½¿ç”¨å†…å­˜ç¼“å­˜ â†’ æ¢å¤ååŒæ­¥ |
| é…ç½®é”™è¯¯ | ä½¿ç”¨é»˜è®¤å€¼ â†’ è®°å½•æ—¥å¿— |
| å­˜å‚¨ç©ºé—´ä¸è¶³ | æ¸…ç†ä¸´æ—¶æ–‡ä»¶ â†’ æç¤ºç”¨æˆ· |
| Skillæ¶¦è‰²å¤±è´¥ | ä½¿ç”¨åŸå§‹å†…å®¹ â†’ æ ‡è®°ä¸ºæœªæ¶¦è‰² |

### 12.3 é”™è¯¯å“åº”ç¤ºä¾‹

```typescript
interface ReflexError {
  code: string;                 // é”™è¯¯ç 
  message: string;              // ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
  details?: Record<string, any>; // è¯¦ç»†ä¿¡æ¯
  suggestion?: string;          // å»ºè®®æ“ä½œ
  recoverable: boolean;         // æ˜¯å¦å¯æ¢å¤
  retryable: boolean;           // æ˜¯å¦å¯é‡è¯•
}

// ç¤ºä¾‹
{
  "code": "A-001",
  "message": "AIæœåŠ¡è°ƒç”¨å¤±è´¥",
  "details": {
    "provider": "claude",
    "error": "Connection timeout"
  },
  "suggestion": "è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œæˆ–å°è¯•åˆ‡æ¢AIæä¾›å•†",
  "recoverable": true,
  "retryable": true
}
```

---

## 13. æ€§èƒ½è¦æ±‚

### 13.1 å“åº”æ—¶é—´

| æ“ä½œ | ç›®æ ‡æ—¶é—´ | æœ€å¤§æ—¶é—´ |
|------|----------|----------|
| åå°„åŒ¹é…ï¼ˆæœ¬åœ°ï¼‰ | < 50ms | < 200ms |
| åå°„åŒ¹é…ï¼ˆå«è¯­ä¹‰ï¼‰ | < 200ms | < 500ms |
| åå°„åˆ›å»º | < 100ms | < 300ms |
| æ€ç»´é“¾æ¸²æŸ“ | < 50ms | < 100ms |
| AIç”Ÿæˆï¼ˆé¦–å­—ï¼‰ | < 1s | < 3s |
| AIç”Ÿæˆï¼ˆå®Œæˆï¼‰ | < 10s | < 30s |
| æ•°æ®å¯¼å‡º | < 1s | < 5s |

### 13.2 èµ„æºé™åˆ¶

| èµ„æº | é™åˆ¶ |
|------|------|
| åå°„æ•°é‡ | æ— é™åˆ¶ï¼ˆå»ºè®®<10000ï¼‰ |
| å•ä¸ªåå°„å¤§å° | < 10KB |
| å¹¶å‘è¯·æ±‚æ•° | 1ï¼ˆCLIåœºæ™¯ï¼‰ |
| å†…å­˜å ç”¨ | < 100MB |
| ç£ç›˜å ç”¨ | < 1GB |

### 13.3 æ€§èƒ½ç›‘æ§

```bash
# æŸ¥çœ‹æ€§èƒ½ç»Ÿè®¡
otr stats

# ç¤ºä¾‹è¾“å‡º
åå°„æ€»æ•°: 156
ä»Šæ—¥æ–°å¢: 3
ä»Šæ—¥å¼ºåŒ–: 12
åŒ¹é…æ¬¡æ•°: 89
å¹³å‡åŒ¹é…æ—¶é—´: 23ms
AIè°ƒç”¨æ¬¡æ•°: 45
å¤±è´¥æ¬¡æ•°: 2
```

---

## 14. å‘½ä»¤è¡Œä½¿ç”¨

### 14.1 åŸºæœ¬å‘½ä»¤

```bash
# å¯åŠ¨äº¤äº’æ¨¡å¼
otr

# ç›´æ¥è¾“å…¥é—®é¢˜
otr "å†™ä¸ªç”¨æˆ·API"

# æŸ¥çœ‹å¸®åŠ©
otr --help

# æŸ¥çœ‹ç‰ˆæœ¬
otr --version

# å¯¼å‡ºåå°„
otr export --format json --output patterns.json

# å¯¼å…¥åå°„
otr import patterns.json

# è¡°å‡é…ç½®
otr decay status
otr decay set user_api_pagination --rate 0.05

# æ€§èƒ½ç»Ÿè®¡
otr stats

# æ¸…é™¤æ•°æ®
otr clear --confirm
```

### 14.2 åŒ¹é…ç›¸å…³

```bash
# æµ‹è¯•åŒ¹é…
otr match "ç”¨æˆ·API"

# æŸ¥çœ‹æ‰€æœ‰åå°„
otr pattern list

# æŸ¥çœ‹å•ä¸ªåå°„è¯¦æƒ…
otr pattern show <pattern-id>

# åˆ é™¤åå°„
otr pattern delete <pattern-id>

# æ‰‹åŠ¨å¼ºåŒ–åå°„
otr pattern reinforce <pattern-id>
```

### 14.3 é¡¹ç›®ç›¸å…³ï¼ˆv2.0ï¼‰

```bash
# åˆ›å»ºé¡¹ç›®
otr project create my-project --name "é¡¹ç›®å" --desc "æè¿°"

# åˆ—å‡ºé¡¹ç›®
otr project list

# åˆ‡æ¢é¡¹ç›®
otr project use my-project

# é¡¹ç›®æˆå‘˜ç®¡ç†
otr project add-member my-project --user alice --role editor
otr project remove-member my-project alice

# å¯¼å‡ºé¡¹ç›®ä¸ºSkill
otr project export-skill my-project --output skills/
```

### 14.4 å¯¼å‡ºç›¸å…³ï¼ˆv2.0ï¼‰

```bash
# å¯¼å‡ºä¸ºSkillå¹¶é¢„è§ˆ
otr export skill --source personal --preview

# å¯¼å‡ºä¸ºSkillå¹¶ä¿å­˜
otr export skill --source personal --output my-skills/

# ä¸Šä¼ åˆ°Skillå¸‚åœº
otr export skill --source project my-project --publish

# åˆ—å‡ºå·²å¯¼å‡ºçš„Skill
otr export skill list --dir my-skills/
```

### 14.5 é…ç½®ç›¸å…³

```bash
# æŸ¥çœ‹é…ç½®
otr config show

# æŸ¥çœ‹AIæä¾›å•†
otr config get ai.provider

# è®¾ç½®AIæä¾›å•†
otr config set ai.provider openai

# é‡ç½®é…ç½®
otr config reset
```

### 14.6 äº¤äº’æ¨¡å¼æ“ä½œ

```
> otr

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸Šå±‚ï¼šæ€ç»´é“¾                              â”‚
â”‚ [æ ¹] â”€â”€â–º [åˆ†æ”¯A] â”€â”€â–º [åˆ†æ”¯A1] âœ“          â”‚
â”‚ [æ ¹] â”€â”€â–º [åˆ†æ”¯B] â”€â”€â–º [åˆ†æ”¯B1] â—‰          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸­å±‚ï¼šè¾“å‡ºç»“æœ                           â”‚
â”‚ AI: è¿™æ˜¯æ ¹æ®ä½ çš„é€‰æ‹©ç”Ÿæˆçš„ä»£ç ...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸‹å±‚ï¼šè¾“å…¥                               â”‚
â”‚ > _ [æŒ‰â†‘â†“é€‰æ‹©,â†’ç¡®è®¤,ç©ºæ ¼AIç”Ÿæˆ]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 15. åå°„å·¥ä½œæµï¼ˆæ ¸å¿ƒæµç¨‹ï¼‰

### 15.1 åå°„åˆ›å»ºæµç¨‹

å½“ç”¨æˆ·è¾“å…¥æ— åŒ¹é…çš„å…³é”®è¯æ—¶ï¼Œä¼šè§¦å‘AIç”Ÿæˆã€‚AIç”Ÿæˆç»“æœåï¼Œéœ€è¦å†³å®šæ˜¯å¦å°†ç»“æœä¿å­˜ä¸ºæ–°åå°„ã€‚

```
ç”¨æˆ·è¾“å…¥ï¼ˆä¸‹å±‚ï¼‰
    â”‚
    â–¼
åŒ¹é…åå°„
    â”‚
    â”œâ”€â”€ æœ‰åŒ¹é… â”€â”€â–º å±•ç¤ºæ€ç»´é“¾æ ‘ï¼ˆä¸Šå±‚ï¼‰
    â””â”€â”€ æ— åŒ¹é… â”€â”€â–º æç¤º"æ— åŒ¹é…ï¼ŒæŒ‰[ç©ºæ ¼]AIç”Ÿæˆ"
                â”‚
                â–¼
         æŒ‰[ç©ºæ ¼]AIç”Ÿæˆ
                â”‚
                â–¼
         ç”Ÿæˆç»“æœ
                â”‚
                â–¼
         ç”¨æˆ·é€‰æ‹©è¡Œä¸º
                â”‚
                â”œâ”€â”€ é€‰æ‹©åˆ†æ”¯ â”€â”€â–º æ‰§è¡Œè¯¥åˆ†æ”¯å†…å®¹
                â”‚           â””â”€â”€ è‡ªåŠ¨å¼ºåŒ–è¯¥åå°„
                â”‚
                â””â”€â”€ æ–°å†…å®¹ â”€â”€â–º æ˜¯å¦ä¿å­˜ä¸ºæ–°åå°„ï¼Ÿ
                            â”‚
                            â”œâ”€â”€ æ˜¯ â”€â”€â–º æå–Pattern
                            â”‚           â””â”€â”€ ä¿å­˜åˆ°æ•°æ®åº“
                            â””â”€â”€ å¦ â”€â”€â–º ä¸¢å¼ƒ
```

#### è‡ªåŠ¨åˆ›å»º vs æ‰‹åŠ¨åˆ›å»º

| æ–¹å¼ | è§¦å‘æ¡ä»¶ | é€‚ç”¨åœºæ™¯ |
|------|----------|----------|
| **è‡ªåŠ¨åˆ›å»º** | ç”¨æˆ·åŒæ„ä¿å­˜ | é«˜é¢‘æ“ä½œ |
| **æ‰‹åŠ¨åˆ›å»º** | ç”¨æˆ·ä¸»åŠ¨è§¦å‘ `otr pattern create` | ç‰¹å®šæ¨¡å¼ |

#### åå°„åˆ›å»ºå‘½ä»¤

```bash
# æ‰‹åŠ¨åˆ›å»ºåå°„
otr pattern create --trigger "ç”¨æˆ·APIåˆ†é¡µ" --response "SELECT * FROM users LIMIT ? OFFSET ?" --tags "api,database"

# ä»å¯¹è¯ä¸­æå–åå°„
otr pattern extract --from "å¯¹è¯å†…å®¹" --auto

# åˆ›å»ºæ—¶æŒ‡å®šå¼ºåº¦
otr pattern create --trigger "xxx" --response "xxx" --strength 50

# åˆ›å»ºæ—¶æŒ‡å®šè¡°å‡ç±»å‹
otr pattern create --trigger "xxx" --response "xxx" --decay-type long
```

#### Patternæå–è§„åˆ™

```typescript
interface ExtractionRule {
  // ä»AIç”Ÿæˆç»“æœä¸­æå–Patternçš„è§„åˆ™
  patterns: {
    // ä»£ç ç‰‡æ®µ â†’ triggerä¸ºæ³¨é‡Š/å‡½æ•°åï¼Œresponseä¸ºä»£ç 
    code: {
      triggerPattern: /^\/\/ (.+)$/m,  // ä»¥"// "å¼€å¤´çš„æ³¨é‡Š
      responsePattern: /```[\s\S]*?```/,  // ä»£ç å—
    },
    // æ­¥éª¤åˆ—è¡¨ â†’ triggerä¸ºæ­¥éª¤åï¼Œresponseä¸ºæ­¥éª¤å†…å®¹
    steps: {
      triggerPattern: /^\d+\. (.+)$/,  // æ•°å­—å¼€å¤´çš„æ­¥éª¤
      responsePattern: /[\s\S]*?(?=\d+\.|$)/,
    },
    // é—®ç­”å¯¹ â†’ triggerä¸ºé—®é¢˜ï¼Œresponseä¸ºç­”æ¡ˆ
    qa: {
      triggerPattern: /^[Qq](?:uestion)?:?\s*(.+)$/,
      responsePattern: /^[Aa](?:nswer)?:?\s*([\s\S]*?)(?=$|Q:)/,
    },
  },
}
```

### 15.2 åå°„å¼ºåŒ–æµç¨‹

å½“ç”¨æˆ·é€‰æ‹©å¹¶æ‰§è¡ŒæŸä¸ªåˆ†æ”¯åï¼Œè¯¥åå°„çš„å¼ºåº¦åº”å¢åŠ ã€‚

```
ç”¨æˆ·é€‰æ‹©åˆ†æ”¯
    â”‚
    â–¼
æ‰§è¡Œè¯¥åˆ†æ”¯å†…å®¹
    â”‚
    â–¼
è‡ªåŠ¨å¼ºåŒ–
    â”‚
    â–¼
Strength_new = Strength_old + reinforcementAmount
    â”‚
    â–¼
å¦‚æœ Strength >= Threshold â†’ æ¿€æ´»è¯¥åå°„
```

#### å¼ºåŒ–è§„åˆ™

| åœºæ™¯ | å¼ºåŒ–å¹…åº¦ |
|------|----------|
| ç”¨æˆ·é€‰æ‹©å¹¶æ‰§è¡Œåˆ†æ”¯ | +5 |
| ç”¨æˆ·å¤šæ¬¡æ‰§è¡ŒåŒä¸€åˆ†æ”¯ | +10 |
| ç”¨æˆ·ä¿®æ”¹åˆ†æ”¯å†…å®¹åæ‰§è¡Œ | +8 |
| åˆ†æ”¯è¾¾åˆ°æ·±åº¦åå°„ï¼ˆ100%ï¼‰ | ä¸å†å¼ºåŒ– |

#### æ‰‹åŠ¨å¼ºåŒ–

```bash
# æ‰‹åŠ¨å¼ºåŒ–åå°„
otr pattern reinforce <pattern-id>

# æŸ¥çœ‹å¼ºåŒ–å†å²
otr pattern history <pattern-id>

# è®¾ç½®å¼ºåŒ–å¹…åº¦
otr config set reinforcement.positive 10
otr config set reinforcement.negative -5
```

### 15.3 è¡°å‡è§¦å‘æœºåˆ¶

è¡°å‡å¯ä»¥é€šè¿‡å®šæ—¶ä»»åŠ¡æˆ–è®¿é—®æ—¶è§¦å‘ã€‚

```
è¡°å‡è§¦å‘æ–¹å¼ï¼š
    â”‚
    â”œâ”€â”€ å®šæ—¶è§¦å‘ï¼ˆæ¨èï¼‰
    â”‚       â””â”€â”€ æ¯éš”intervalæ‰§è¡Œä¸€æ¬¡è¡°å‡è®¡ç®—
    â”‚           â””â”€â”€ åå°è¿è¡Œï¼Œä¸å½±å“ç”¨æˆ·ä½“éªŒ
    â”‚
    â””â”€â”€ è®¿é—®æ—¶è§¦å‘
            â””â”€â”€ ç”¨æˆ·æŸ¥è¯¢æ—¶æ£€æŸ¥å¹¶è¡°å‡
                â””â”€â”€ ä¼˜ç‚¹ï¼šå®æ—¶
                â””â”€â”€ ç¼ºç‚¹ï¼šé¦–æ¬¡è®¿é—®æ…¢
```

#### è¡°å‡å‘½ä»¤

```bash
# æ‰‹åŠ¨è§¦å‘è¡°å‡ï¼ˆç®¡ç†å‘˜ç”¨ï¼‰
otr decay run

# æŸ¥çœ‹è¡°å‡çŠ¶æ€
otr decay status

# æŸ¥çœ‹å³å°†è¡°å‡çš„åå°„
otr decay preview

# è®¾ç½®è¡°å‡å‚æ•°
otr decay set <pattern-id> --rate 0.05

# ç¦ç”¨ç‰¹å®šåå°„çš„è¡°å‡
otr decay disable <pattern-id>

# å¯ç”¨è¡°å‡
otr decay enable <pattern-id>
```

### 15.4 åå°„åŒ¹é…ä¸æ‰§è¡Œå®Œæ•´æµç¨‹

```
ç”¨æˆ·è¾“å…¥
    â”‚
    â–¼
è·å–å½“å‰é¡¹ç›®/ç©ºé—´çš„åå°„é›†
    â”‚
    â–¼
æ‰§è¡ŒåŒ¹é…æµç¨‹ï¼ˆ8.2ï¼‰
    â”‚
    â”œâ”€â”€ æœ‰åŒ¹é… â”€â”€â–º å±•ç¤ºæ€ç»´é“¾æ ‘ï¼ˆä¸Šå±‚ï¼‰
    â”‚           â””â”€â”€ æŒ‰å¼ºåº¦æ’åº
    â”‚
    â””â”€â”€ æ— åŒ¹é… â”€â”€â–º æç¤º"æ— åŒ¹é…ï¼ŒæŒ‰[ç©ºæ ¼]AIç”Ÿæˆ"
                â”‚
                â–¼
         ç”¨æˆ·æŒ‰[ç©ºæ ¼]
                â”‚
                â–¼
         AIç”Ÿæˆç»“æœ
                â”‚
                â–¼
         ç”¨æˆ·é€‰æ‹©
                â”‚
                â”œâ”€â”€ é€‰æ‹©å·²æœ‰åˆ†æ”¯
                â”‚           â””â”€â”€ æ‰§è¡Œå†…å®¹
                â”‚               â””â”€â”€ è‡ªåŠ¨å¼ºåŒ–è¯¥åå°„
                â”‚                   â””â”€â”€ å¦‚æœStrength >= Threshold â†’ æ ‡è®°ä¸ºæ¿€æ´»
                â”‚
                â””â”€â”€ æ”¾å¼ƒé€‰æ‹©
                            â””â”€â”€ æç¤º"æ˜¯å¦ä¿å­˜ä¸ºæ–°åå°„ï¼Ÿ"
                                â”‚
                                â”œâ”€â”€ æ˜¯ â”€â”€â–º åˆ›å»ºæ–°åå°„
                                â””â”€â”€ å¦ â”€â”€â–º ä¸¢å¼ƒ
```

### 15.5 é¡¹ç›®ç©ºé—´ä¸åå°„çš„å…³ç³»

v1.0è™½ç„¶æ²¡æœ‰é¡¹ç›®ç©ºé—´æ¦‚å¿µï¼Œä½†æ‰€æœ‰åå°„é»˜è®¤å­˜å‚¨åœ¨"é»˜è®¤ç©ºé—´"ä¸­ã€‚

```
v1.0 æ•°æ®ç»“æ„ï¼š
â””â”€â”€ é»˜è®¤ç©ºé—´ï¼ˆdefaultï¼‰
    â””â”€â”€ patterns/
        â”œâ”€â”€ pat-001
        â”œâ”€â”€ pat-002
        â””â”€â”€ ...

v2.0 æ•°æ®ç»“æ„ï¼š
â””â”€â”€ é¡¹ç›®ç©ºé—´
    â”œâ”€â”€ project-A/
    â”‚   â””â”€â”€ patterns/
    â”‚       â”œâ”€â”€ pat-001
    â”‚       â””â”€â”€ ...
    â”‚
    â””â”€â”€ project-B/
        â””â”€â”€ patterns/
            â””â”€â”€ ...
```

#### v1.0 é»˜è®¤ç©ºé—´ç®¡ç†

```bash
# æŸ¥çœ‹é»˜è®¤ç©ºé—´ä¸­çš„åå°„
otr pattern list

# å¯¼å‡ºé»˜è®¤ç©ºé—´æ‰€æœ‰åå°„
otr export --all --output all-patterns.json

# æ¸…ç©ºé»˜è®¤ç©ºé—´
otr pattern clear --confirm

# è¿ç§»åå°„åˆ°æŒ‡å®šé¡¹ç›®ï¼ˆv2.0ï¼‰
otr pattern migrate <pattern-id> --to-project my-project
```

---

## 16. Shellè‡ªåŠ¨è¡¥å…¨

### 16.1 æ”¯æŒçš„Shell

| Shell | çŠ¶æ€ | å®‰è£…å‘½ä»¤ |
|-------|------|----------|
| Bash | âœ… é»˜è®¤ | `otr completion bash` |
| Zsh | âœ… é»˜è®¤ | `otr completion zsh` |
| Fish | â³ åç»­ | `otr completion fish` |
| PowerShell | â³ åç»­ | `otr completion powershell` |

### 16.2 å®‰è£…è‡ªåŠ¨è¡¥å…¨

```bash
# Bash
## ä¸´æ—¶ç”Ÿæ•ˆ
source <(otr completion bash)

## æ°¸ä¹…ç”Ÿæ•ˆï¼ˆç”¨æˆ·çº§ï¼‰
otr completion bash > ~/.bash_completion.d/otr

## æ°¸ä¹…ç”Ÿæ•ˆï¼ˆç³»ç»Ÿçº§ï¼Œéœ€è¦sudoï¼‰
sudo otr completion bash > /etc/bash_completion.d/otr

# Zsh
## ä¸´æ—¶ç”Ÿæ•ˆ
source <(otr completion zsh)

## æ°¸ä¹…ç”Ÿæ•ˆï¼ˆ~/.zshrcï¼‰
echo 'autoload -U compinit; compinit' >> ~/.zshrc
otr completion zsh > ~/.zsh/completion/_otr
```

### 16.3 è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½

```
# å‘½ä»¤è¡¥å…¨
otr [ç©ºæ ¼][Tab]          # è¡¥å…¨å‘½ä»¤
otr exp[Tab]            # è¡¥å…¨ä¸º export

# å­å‘½ä»¤è¡¥å…¨
otr export [Tab]        # è¡¥å…¨å­å‘½ä»¤
otr export --[Tab]      # è¡¥å…¨é€‰é¡¹

# å‚æ•°è¡¥å…¨
otr export --format [Tab]  # è¡¥å…¨å‚æ•°å€¼ json sqlite
otr project [Tab]         # è¡¥å…¨é¡¹ç›®å

# åŠ¨æ€è¡¥å…¨
otr pattern delete pat-[Tab]  # è¡¥å…¨åå°„ID
```

### 16.4 è¡¥å…¨é…ç½®æ–‡ä»¶

```yaml
completion:
  shell: "bash"            # å½“å‰Shell
  showHidden: false        # æ˜¾ç¤ºéšè—æ–‡ä»¶
  fuzzy: true              # æ¨¡ç³ŠåŒ¹é…
  sort: "alphabetical"     # alphabetical | none
  descriptions: true       # æ˜¾ç¤ºæè¿°
```

---

## 17. å®‰è£…ä¸éƒ¨ç½²

### 17.1 å®‰è£…æ–¹å¼

#### æ–¹å¼ä¸€ï¼šnpmå…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# å®‰è£…
npm install -g @openclaw/reflex

# éªŒè¯å®‰è£…
otr --version

# å‡çº§
npm update -g @openclaw/reflex
```

#### æ–¹å¼äºŒï¼šDocker

```bash
# æ‹‰å–é•œåƒ
docker pull openclaw/reflex:latest

# è¿è¡Œï¼ˆä½¿ç”¨æœ¬åœ°æ•°æ®å·ï¼‰
docker run -it --rm \
  -v ~/.otr:/root/.otr \
  -v $(pwd)/exports:/app/exports \
  openclaw/reflex

# Docker Compose
cat > docker-compose.yml << 'EOF'
version: '3.8'
services:
  reflex:
    image: openclaw/reflex:latest
    volumes:
      - ~/.otr:/root/.otr
      - ./exports:/app/exports
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
    stdin_open: true
    tty: true
EOF

docker-compose run reflex
```

#### æ–¹å¼ä¸‰ï¼šäºŒè¿›åˆ¶ä¸‹è½½

```bash
# Linux (x86_64)
wget https://github.com/openclaw/open-think-reflex/releases/latest/download/otr-linux-x64.tar.gz
tar -xzf otr-linux-x64.tar.gz
./otr --version

# Linux (arm64)
wget https://github.com/openclaw/open-think-reflex/releases/latest/download/otr-linux-arm64.tar.gz
tar -xzf otr-linux-arm64.tar.gz
./otr --version

# macOS (Intel)
wget https://github.com/openclaw/open-think-reflex/releases/latest/download/otr-macos-x64.tar.gz
tar -xzf otr-macos-x64.tar.gz
./otr --version

# macOS (Apple Silicon)
wget https://github.com/openclaw/open-think-reflex/releases/latest/download/otr-macos-arm64.tar.gz
tar -xzf otr-macos-arm64.tar.gz
./otr --version

# Windows
# ä¸‹è½½ otr-windows-x64.zipï¼Œè§£å‹åè¿è¡Œ otr.exe
```

#### æ–¹å¼å››ï¼šä»æºç ç¼–è¯‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/ArmyClaw/open-think-reflex.git
cd open-think-reflex

# å®‰è£…ä¾èµ–
npm install

# æ„å»º
npm run build

# é“¾æ¥åˆ°å…¨å±€
npm link

# è¿è¡Œ
otr
```

### 17.2 ç¯å¢ƒè¦æ±‚

| ä¾èµ– | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ |
|------|----------|----------|
| Node.js | v18.0.0 | v20.0.0+ |
| npm | v9.0.0 | v10.0.0+ |
| SQLite | 3.36.0 | 3.40.0+ |

### 17.3 åˆå§‹åŒ–é…ç½®

```bash
# é¦–æ¬¡è¿è¡Œï¼ˆå¼•å¯¼å¼é…ç½®ï¼‰
otr init

# äº¤äº’å¼é…ç½®å†…å®¹ï¼š
# 1. é€‰æ‹©AIæä¾›å•† (claude/openai/local)
# 2. è¾“å…¥API Key
# 3. é€‰æ‹©æ•°æ®ç›®å½•
# 4. é…ç½®åŒ¹é…ç­–ç•¥
# 5. é…ç½®è¡°å‡å‚æ•°

# è·³è¿‡å¼•å¯¼ï¼Œä½¿ç”¨é»˜è®¤é…ç½®
otr init --skip

# ä»é…ç½®æ–‡ä»¶åˆå§‹åŒ–
otr init --config config.yaml
```

### 17.4 Dockeréƒ¨ç½²

#### å¼€å‘ç¯å¢ƒ

```bash
# æ„å»ºé•œåƒ
docker build -t reflex-dev .

# è¿è¡Œå¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
docker run -it --rm \
  -v $(pwd):/app \
  -v ~/.otr:/root/.otr \
  -e NODE_ENV=development \
  reflex-dev \
  npm run dev
```

#### ç”Ÿäº§ç¯å¢ƒ

```bash
# æ„å»ºç”Ÿäº§é•œåƒ
docker build -t reflex:latest .

# è¿è¡Œ
docker run -d \
  --name reflex \
  -v ~/.otr:/root/.otr \
  -v ./exports:/app/exports \
  -e ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY} \
  -e LOG_LEVEL=info \
  reflex:latest

# æŸ¥çœ‹æ—¥å¿—
docker logs -f reflex

# é‡å¯
docker restart reflex

# åœæ­¢
docker stop reflex
```

#### Kuberneteséƒ¨ç½²

```yaml
# k8s-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: reflex
spec:
  replicas: 1
  selector:
    matchLabels:
      app: reflex
  template:
    metadata:
      labels:
        app: reflex
    spec:
      containers:
      - name: reflex
        image: openclaw/reflex:latest
        env:
        - name: ANTHROPIC_API_KEY
          valueFrom:
            secretKeyRef:
              name: reflex-secrets
              key: anthropic-api-key
        volumeMounts:
        - name: reflex-data
          mountPath: /root/.otr
        ports:
        - containerPort: 3000
      volumes:
      - name: reflex-data
        persistentVolumeClaim:
          claimName: reflex-pvc
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: reflex-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
```

### 17.5 åå‘ä»£ç†é…ç½®

#### Nginx

```nginx
server {
    listen 80;
    server_name reflex.example.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

### 17.6 å¥åº·æ£€æŸ¥

```bash
# CLIå¥åº·æ£€æŸ¥
otr health

# è¾“å‡ºç¤ºä¾‹
{
  "status": "healthy",
  "version": "1.0.0",
  "database": "connected",
  "storage": {
    "reflexCount": 156,
    "storageUsed": "12MB"
  },
  "aiProvider": {
    "name": "claude",
    "status": "connected",
    "quota": {
      "used": 45000,
      "limit": 100000,
      "percentage": 45
    }
  }
}

# Dockerå¥åº·æ£€æŸ¥
docker inspect --format='{{.State.Health.Status}}' reflex
```

### 17.7 ç›‘æ§æŒ‡æ ‡

```bash
# æŸ¥çœ‹è¯¦ç»†ç»Ÿè®¡
otr stats --verbose

# è¾“å‡ºç¤ºä¾‹
{
  "version": "1.0.0",
  "uptime": "2d 5h 30m",
  "patterns": {
    "total": 156,
    "active": 142,
    "decayed": 14
  },
  "usage": {
    "totalMatches": 1250,
    "todayMatches": 45,
    "averageMatchTime": "23ms"
  },
  "ai": {
    "totalCalls": 380,
    "todayCalls": 12,
    "failedCalls": 3
  },
  "storage": {
    "databaseSize": "12MB",
    "exportsSize": "8MB"
  }
}

# å¯¼å‡ºæŒ‡æ ‡ï¼ˆPrometheusæ ¼å¼ï¼‰
otr stats --format prometheus
```

---

## 18. æµ‹è¯•ç­–ç•¥

### 18.1 æµ‹è¯•ç±»å‹

| ç±»å‹ | å·¥å…· | è¦†ç›–èŒƒå›´ |
|------|------|----------|
| å•å…ƒæµ‹è¯• | Jest | æ ¸å¿ƒç®—æ³•ã€æ•°æ®ç»“æ„ |
| é›†æˆæµ‹è¯• | Jest + Supertest | APIã€æ•°æ®åº“æ“ä½œ |
| E2Eæµ‹è¯• | Playwright | äº¤äº’æµç¨‹ã€CLIå‘½ä»¤ |
| æ€§èƒ½æµ‹è¯• | k6 | åŒ¹é…æ€§èƒ½ã€å¹¶å‘èƒ½åŠ› |

### 18.2 æµ‹è¯•å‘½ä»¤

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test:unit

# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration

# è¿è¡ŒE2Eæµ‹è¯•
npm run test:e2e

# è¿è¡Œæ€§èƒ½æµ‹è¯•
npm run test:perf

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# ç›‘è§†æ¨¡å¼ï¼ˆå¼€å‘æ—¶ï¼‰
npm run test:watch
```

### 18.3 æµ‹è¯•é…ç½®

```yaml
# jest.config.js
module.exports = {
  testEnvironment: 'node',
  collectCoverageFrom: [
    'src/**/*.ts',
    '!src/**/*.d.ts',
  ],
  testMatch: [
    '**/*.test.ts',
  ],
  verbose: true,
  testTimeout: 10000,
};
```

### 18.4 CI/CDé…ç½®

```yaml
# .github/workflows/test.yml
name: Test

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Run unit tests
      run: npm run test:unit
    
    - name: Run integration tests
      run: npm run test:integration
    
    - name: Run E2E tests
      run: npm run test:e2e
    
    - name: Upload coverage
      uses: codecov/codecov-action@v3
      with:
        files: ./coverage/lcov.info
```

---

## 19. è·¯çº¿è§„åˆ’

### 19.1 v1.0ï¼šAIè¾“å…¥åŠ é€Ÿå™¨

```
ç”¨æˆ·è¾“å…¥ç®€çŸ­å…³é”®è¯
    â”‚
    â–¼
æ€ç»´é“¾æ ‘è‡ªåŠ¨å±•å¼€æ˜¾ç¤ºæ‰€æœ‰å¯èƒ½æ–¹å‘
    â”‚
    â–¼
ç”¨æˆ·é€‰æ‹©æ–¹å‘ï¼Œå¿«é€Ÿæ»šåŠ¨è¿­ä»£
    â”‚
    â–¼
AIç”Ÿæˆé«˜è´¨é‡ç»“æœ
```

**v1.0 ç›®æ ‡**ï¼š
1. **åå°„å½¢æˆ** - ä»é«˜é¢‘æ“ä½œä¸­å­¦ä¹ 
2. **å¿«é€Ÿè§¦å‘** - ç©ºæ ¼é”®è§¦å‘ç”Ÿæˆ
3. **å¯è§†åŒ–æ€ç»´** - å±•ç¤ºAIæ¨ç†è·¯å¾„
4. **ä¸ªæ€§åŒ–** - æ¯ä¸ªç”¨æˆ·å‘å±•ç‹¬ç‰¹çš„åå°„é›†

### 19.2 v2.0ï¼šæ€ç»ªæ•´ç†æ‰©å±•

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|------|--------|------|
| é¡¹ç›®ç©ºé—´ | P0 | éš”ç¦»ä¸åŒé¡¹ç›®çš„åå°„é›† |
| æ—¶é—´çº¿å›æº¯ | P1 | æŒ‰æ—¶é—´æŸ¥çœ‹å†å²åå°„ |
| ç»éªŒå¯¼å‡º | P1 | å°†åå°„å¯¼å‡ºä¸ºAgentSkill |
| äº‘åŒæ­¥ | P2 | å¤šè®¾å¤‡æ•°æ®åŒæ­¥ |
| å¤šäººåä½œ | P2 | é¡¹ç›®äº¤æ¥ã€å…±äº«åå°„ |
| Skillå¸‚åœº | P2 | å¯¼å‡ºã€ä¸Šæ¶ã€ç‰ˆæœ¬ç®¡ç† |

### 19.3 ç‰ˆæœ¬å‘å¸ƒè®¡åˆ’

| ç‰ˆæœ¬ | ç›®æ ‡ | æ—¶é—´ |
|------|------|------|
| v1.0.0 | æ ¸å¿ƒäº¤äº’ã€åå°„å½¢æˆã€SQLiteå­˜å‚¨ | 3ä¸ªæœˆ |
| v1.1.0 | è¯­ä¹‰åŒ¹é…ã€é…ç½®ç®¡ç† | 1ä¸ªæœˆ |
| v1.2.0 | è¡°å‡æœºåˆ¶ã€æ€§èƒ½ä¼˜åŒ– | 1ä¸ªæœˆ |
| v2.0.0 | é¡¹ç›®ç©ºé—´ã€ç»éªŒå¯¼å‡º | 3ä¸ªæœˆ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.1  
**æ›´æ–°æ—¥æœŸ**: 2026-02-20  
**é¡¹ç›®**: open-think-reflex
